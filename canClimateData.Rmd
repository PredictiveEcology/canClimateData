---
title: "canClimateData Manual"
subtitle: "v.`r SpaDES.core::moduleMetadata(module = 'canClimateData', path = '..')$version`"
date: "Last updated: `r Sys.Date()`"
output:
  bookdown::html_document2:
    toc: true
    toc_float: true
    theme: sandstone
    number_sections: false
    df_print: paged
    keep_md: yes
editor_options:
  chunk_output_type: console
  bibliography: citations/references_canClimateData.bib
citation-style: citations/ecology-letters.csl
link-citations: true
always_allow_html: true
---

<!-- the following are text references used in captions for LaTeX compatibility -->
(ref:canClimateData) *canClimateData*

```{r setup-canClimateData, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, eval = FALSE, results = "hold") ## change to eval = TRUE if all chunks are to be evaluated

## get citation style
if (!file.exists("citations/ecology-letters.csl")) {
  dir.create("citations", showWarnings = FALSE)
  download.file("https://www.zotero.org/styles/ecology-letters", destfile = "citations/ecology-letters.csl")
}

if (!require("Require", quietly = TRUE)) {
  install.packages("Require")
  library(Require)
}
Require("SpaDES.core", require = FALSE, upgrade = FALSE)
Require(c("knitr", "kableExtra",
          "PredictiveEcology/climateData@development"))

dir.create("figures", showWarnings = FALSE)

download.file(url = "https://img.shields.io/badge/Made%20with-Markdown-1f425f.png",
              destfile = "figures/markdownBadge.png",
              mode = 'wb')
```

[![made-with-Markdown](figures/markdownBadge.png)](http://commonmark.org)

<!-- if knitting to pdf remember to add the pandoc_args: ["--extract-media", "."] option to yml in order to get the badge images -->

# canClimateData module

#### Authors:

`r paste(as.character(SpaDES.core::moduleMetadata(module = "canClimateData", path = "..")$authors), sep = ", ")`
<!-- ideally separate authors with new lines, '\n' not working -->

## Module Overview

### Module summary

Prepare Canadian historic and projected climate data for use with `LandR.CS` and `fireSense.`

Historical and projected climate data were generated using the [`climateData`](https://github.com/PredictiveEcology/climateData) package, which provides wrappers for calling [ClimateNA](https://climatena.ca) to generate the climate data on a local machine.
These datasets were then archived and uploaded to Google Drive, and an SQLite database (shipped with the package) is used to record which datasets are available, and how to retrieve them.

Currently supports study areas across Canada, for some CMIP6 climate scenarios (see below).

**Available data sets:**

```{r climateStudyAreas, eval = TRUE, echo = FALSE, message = FALSE, warning = FALSE}
knitr::include_graphics(system.file("extdata/tile_map.png", package = "climateData"))
```

```{r climateDataAvail, eval = TRUE, echo = TRUE, message = FALSE, results = "markup", warning = FALSE}
## historic data
available("historical")[["years"]]
available("historical_normals")[["periods"]]

## future climate scenarios
available("future")[["gcms"]]
available("future")[["ssps"]]
```

Additional data sets will be added in the future.

### Module inputs and parameters

#### Input objects

Table \@ref(tab:moduleInputs-canClimateData) shows the full list of module inputs.

See `?climateData::prepClimateLayers` for examples constructing a custom `climateVariables` object to use to add arbitrary climate variables to the output lists of climate rasters.

```{r moduleInputs-canClimateData, echo = FALSE, eval = TRUE, message = FALSE, warning = FALSE}
df_inputs <- SpaDES.core::moduleInputs("canClimateData", "..")
knitr::kable(df_inputs,
             caption = "List of (ref:canClimateData) input objects and their description.") |>
  kableExtra::kable_styling(latex_options = "scale_down", full_width = TRUE)
```

#### Parameters

Table \@ref(tab:moduleParams-canClimateData) shows the full list of module parameters.


```{r moduleParams-canClimateData, echo = FALSE, eval = TRUE, message = FALSE, warning = FALSE}
df_params <- SpaDES.core::moduleParams("canClimateData", "..")
knitr::kable(df_params, caption = "List of (ref:canClimateData) parameters and their description.") |>
  kableExtra::kable_styling(latex_options = "scale_down", full_width = TRUE)
```

### Events

This module consists of a single `init` event that performs all data preparation.

### Module outputs

Description of the module outputs (Table \@ref(tab:moduleOutputs-canClimateData)).

```{r moduleOutputs-canClimateData, echo = FALSE, eval = TRUE, message = FALSE, warning = FALSE}
df_outputs <- SpaDES.core::moduleOutputs("canClimateData", "..")
knitr::kable(df_outputs, caption = "List of (ref:canClimateData) outputs and their description.") %>%
  kableExtra::kable_styling(latex_options = "scale_down", full_width = TRUE)
```

### Links to other modules

Originally developed to provide inputs to [`gmcsDataPrep`](https://github.com/ianmseddy/gmcsDataPrep) (for use with climate-sensitive LandR Biomass projections; see [`Biomass_core`](https://github.com/PredictiveEcology/Biomass_core)) and the [`fireSense`](https://github.com/PredictiveEcology/fireSense) suite of modules.

### Getting help

<https://github.com/PredictiveEcology/canClimateData/issues>
